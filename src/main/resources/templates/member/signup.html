<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<th:block th:replace="~{/layouts/baseNoMenu :: base(~{this::content})}">
    <th:block th:fragment="content">
    <h1>회원가입 페이지 영역</h1>
    <div> <!--  회원가입 영역 START -->
        <form action="" th:action th:object="${memberForm}" method="post">
        <div name="profile">  <!--  회원 프로필 영역 START  -->
            <span name="memberInfo">  <!--  회원 프로필 사진 영역 START  -->
                <div name="memberImage">  <!--  회원 프로필 사진  -->
                    <!-- TODO: 추가예정
                    <input type="file" th:field="*{profileImage}" name="profileImage">
                    -->
                </div>
                <div name="gernder-radio">  <!--  버튼 영역  -->
                    <input type="radio" th:field="*{gender}" th:value="MALE">
                    <span name="male-gender-radio">남성</span>
                    <input type="radio" th:field="*{gender}" th:value="FEMALE">
                    <span name="female-gender-radio">여성</span>
                </div>
                <div name="location">  <!--  위치 영역  -->
                    <span name="location-dropdown">
                            <select th:field="*{location}" th:value="SEOUL">
                                <option th:value="SEOUL">서울</option>
                                <option th:value="BUSAN">부산</option>
                                <option th:value="DAEGU">대구</option>
                                <option th:value="INCHEON">인천</option>
                                <option th:value="GWANGJU">광주</option>
                                <option th:value="DAEJEON">대전</option>
                                <option th:value="ULSAN">울산</option>
                                <option th:value="SEJONG">세종</option>
                                <option th:value="GYEONGGI">경기</option>
                                <option th:value="GANGWON">강원</option>
                                <option th:value="CHUNGBUK">충북</option>
                                <option th:value="CHUNGNAM">충남</option>
                                <option th:value="JEONBUK">전북</option>
                                <option th:value="JEONNAM">전남</option>
                                <option th:value="GYEONGBUK">경북</option>
                                <option th:value="GYEONGNAM">경남</option>
                                <option th:value="JEJU">제주</option>
                                <option th:value="ETC">기타</option>
                            </select>
                    </span>
                    <span name="location-checkbox">
                        <!-- 활동 지역 외 게시글, 작품 미노출 -->
                        <input type="checkbox" >
                    </span>
                </div>
            </span>  <!--  회원 프로필 사진 영역 END  -->
            <span name="memberInfo-textbox">  <!--  회원 정보 영역 START  -->
                <div name="userId">
                    <span name="userId-textbox"></span>
                        <input type="text" th:field="*{userid}" placeholder="아이디">
                    <span name="submit-button">
                        <button type="button" id="checkUserIdBtn">중복확인</button>
                    </span>
                </div>
                <div name="username">
                    <span name="username-textbox"></span>
                        <input type="text" th:field="*{username}" placeholder="닉네임">
                    <span name="submit-button">
                        <button type="button" id="checkUsernameBtn">중복확인</button>
                    </span>
                </div>
                <div name="email">
                    <span name="email-textbox"></span>
                        <input type="email" th:field="*{email}" placeholder="이메일">
                    <span name="submit-button">
                        <button type="button" id="checkEmailBtn">중복확인</button>
                    </span>
                </div>
                <div name="password">
                    <span name="password-textbox"></span>
                        <input type="password" th:field="*{password}" placeholder="비밀번호">
                    <span name="password-textbox">
                        <input type="password" id="repeatPassword" placeholder="비밀번호 재입력">
                    </span>
                </div>
                <div name="phone">
                    <span name="phone-textbox"></span>
                        <input type="text" th:field="*{phone}" placeholder="전화번호">
                    <span name="username-textbox">인증번호 입력</span>
                        <input type="text" placeholder="인증번호 입력">
                    <span name="submit-button">인증번호 확인
                    </span>
                </div>
                <div name="birth">
                    <span name="birth-textbox"></span>
                        <input type="date" th:field="*{birth}" placeholder="생년월일">
                    <span name="submit-button">중복확인</span>
                </div>
            </span>  <!--  회원 정보 영역 END  -->
            <div name="introduce">
                <input type="text" th:field="*{introduction}" placeholder="자기소개">
            </div>
        </div>  <!--  회원 프로필 영역 END  -->
    <div name="genre">  <!-- 관심사 영역 START -->
        <div name="heading">관심사</div>  <!--  제목  -->
        <form action="" th:action th:object="${interestForm}" method="post">
        <div name="cards">  <!--  관심사 카드 영역 상단 START  -->
            <h1>카드 영역</h1>
            <span name="card">
                <input type="checkbox" th:field="*{interest}" th:value="DRAMA">
                <div name="image"></div>
                <div name="title">연극</div>
            </span>
            <span name="card">
                <input type="checkbox" th:field="*{interest}" th:value="CONCERT">
                <div name="image"></div>
                <div name="title">음악/콘서트</div>
            </span>
            <span name="card">
                <input type="checkbox" th:field="*{interest}" th:value="EXHIBITION">
                <div name="image"></div>
                <div name="title">전시</div>
            </span>
            <span name="card">
                <input type="checkbox" th:field="*{interest}" th:value="MUSICAL">
                <div name="image"></div>
                <div name="title">뮤지컬/오페라</div>
            </span>
            <span name="card">
                <input type="checkbox" th:field="*{interest}" th:value="ETC">
                <div name="image"></div>
                <div name="title">기타</div>
            </span>
        </div>  <!--  관심사 카드 영역 상단 END  -->
       <!-- <div name="cards">  &lt;!&ndash;  관심사 카드 영역 하단 START  &ndash;&gt;
            <h1>카드 영역</h1>
            <span name="card">
                <div name="image"></div>
                <div name="title"></div>
            </span>
            <span name="card">
                <div name="image"></div>
                <div name="title"></div>
            </span>
            <span name="card">
                <div name="image"></div>
                <div name="title"></div>
            </span>
            <span name="card">
                <div name="image"></div>
                <div name="title"></div>
            </span>
        </div>  &lt;!&ndash;  관심사 카드 영역 하단 END  &ndash;&gt;-->
            <div name="submit-button">
                <button type="submit">회원가입</button>
            </div>
        </form>
        </form>
    </div>  <!-- 관심사 영역 End -->
    </div><!--  회원가입 영역 END -->
        <!-- 모달 버튼
        <button type="button" class="btn-sm btn-primary" data-toggle="modal" data-target="#exampleModal">모달 열기</button>
        -->
    <!-- 모달 -->
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">모달 제목</h5>
                    <button type="button" class="btn-close" data-dismiss="modal" aria-label="닫기">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="mb-3">
                            <label for="recipient-name" class="col-form-label">지역</label>
                            <input type="text" class="form-control" id="recipient-name">
                        </div>
                        <div class="mb-3">

                        </div>
                    </form>
                    <!--여기에 콘텐츠를 넣습니다.
                   -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">닫기</button>
                    <button type="button" class="btn btn-primary">저장</button>
                </div>
            </div>
        </div>
    </div>
    </th:block>
</th:block>
<!-- jQuery, Popper.js, 부트스트랩 JS -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<!--<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>
    $(document).ready(function(){
        let checkIdResult = null;
        let checkNameResult = null;
        let checkEmailResult = null;

        // id속성값이 userid인 input태그에 change이벤트 등록
        $("#userid").change(function(){
            let userid = $(this).val(); // 사용자가 작성한 값 꺼내기
            console.log("userid : " + userid);
            $.ajax({
                type: "post",
                url: "/useridCheck",
                data: {userid: userid},
                success: function(result){
                    console.log("성공!");
                    console.log(result);
                    checkIdResult = result; // 성공 결과 저장
                },
                error: function(e) {
                    console.log("실패...");
                    console.log(e);
                }
            });
        });
        $("#checkUserIdBtn").click(function(){
            if(checkIdResult !== null) {
                alert(checkIdResult); // 마지막 AJAX 호출 결과 사용
            } else {
                alert("아이디 중복확인을 해주세요.");
            }
        });
        $("#username").change(function(){
            let username = $(this).val(); // 사용자가 작성한 값 꺼내기
            console.log("username : " + username);
            $.ajax({
                type: "post",
                url: "/usernameCheck",
                data: {username: username},
                success: function(result){
                    console.log("성공!");
                    console.log(result);
                    checkNameResult = result; // 성공 결과 저장
                },
                error: function(e) {
                    console.log("실패...");
                    console.log(e);
                }
            });
        });
        $("#checkUsernameBtn").click(function(){
            if(checkNameResult !== null) {
                alert(checkNameResult); // 마지막 AJAX 호출 결과 사용
            } else {
                alert("닉네임 중복확인을 해주세요.");
            }
        });
        $("#email").change(function(){
            let email = $(this).val(); // 사용자가 작성한 값 꺼내기
            console.log("email : " + email);
            $.ajax({
                type: "post",
                url: "/emailCheck",
                data: {email: email},
                success: function(result){
                    console.log("성공!");
                    console.log(result);
                    checkEmailResult = result; // 성공 결과 저장
                },
                error: function(e) {
                    console.log("실패...");
                    console.log(e);
                }
            });
        });
        $("#checkEmailBtn").click(function(){
            if(checkEmailResult !== null) {
                alert(checkEmailResult); // 마지막 AJAX 호출 결과 사용
            } else {
                alert("이메일 중복확인을 해주세요.");
            }
        });
    });

    $("#repeatPassword").change(function(){
        let password = $("#password").val();
        let repeatPassword = $(this).val();
        if (password === null || password === "") {
            alert("비밀번호를 먼저 입력해주세요.");
        }
        if(password !== repeatPassword){
            alert("비밀번호가 일치하지 않습니다.");
        }
    });
</script>
<script>
    const myModal = document.getElementById('exampleModal') // 모달
    const myInput = document.getElementById('myInput') // 모달 내부의 input
    myModal.addEventListener('shown.bs.modal', () => {
        myInput.focus()
    })
</script>
</html>